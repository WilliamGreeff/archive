---
layout: archive
title: Zulip Chat Archive
permalink: /stream/113488-general/topic/Homebrew.20Tap.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/113488-general/index.html">general</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Homebrew.20Tap.html">Homebrew Tap</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="204027245"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Homebrew%20Tap/near/204027245" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Julian Berman <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Homebrew.20Tap.html#204027245">(Jul 15 2020 at 23:43)</a>:</h4>
<p>Hi! I installed Lean maybe a few months ago (via a nonstandard install in a few ways I wanted to modify) and then didn't touch it much, but am about to try again --  on macOS, it looks like the version that's in the Homebrew core repo is the 3.4.2 non-community version -- does anyone know if there's someone maintaining a tap for the community-maintained one that I can use? (If not I guess I'll try making one...)</p>



<a name="204027528"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Homebrew%20Tap/near/204027528" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Alex J. Best <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Homebrew.20Tap.html#204027528">(Jul 15 2020 at 23:47)</a>:</h4>
<p>The recommended install on mac is via, <a href="https://leanprover-community.github.io/install/macos.html">https://leanprover-community.github.io/install/macos.html</a> the homebrew tap is completely outdated if you want to use mathlib at this point, as the community version is on 3.17.1. Nobody is maintaining a tap, as we use the lean specific elan to manage lean versions rather than brew.</p>



<a name="204029173"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Homebrew%20Tap/near/204029173" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Julian Berman <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Homebrew.20Tap.html#204029173">(Jul 16 2020 at 00:06)</a>:</h4>
<p>Got it, yeah I found that page, ok cool, will figure something out. Appreciated!</p>



<a name="204042575"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Homebrew%20Tap/near/204042575" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Homebrew.20Tap.html#204042575">(Jul 16 2020 at 04:02)</a>:</h4>
<p>We're planning, starting hopefully next week, to try to remove the 3.4.2 packages in <code>apt-get</code>, <code>homebrew</code>, etc. Ideally these packages would instead install elan+leanproject, and leave it to <code>elan</code> to obtain Lean versions.</p>



<a name="207007689"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Homebrew%20Tap/near/207007689" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Homebrew.20Tap.html#207007689">(Aug 15 2020 at 06:05)</a>:</h4>
<p>I guess we never did this (try to boot Lean 3.4.2 out of <code>apt-get</code>, <code>homebrew</code>, etc, replacing them instead with <code>elan</code>). Does anyone have experience with this who could take on at least one of these package managers?</p>



<a name="207007731"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Homebrew%20Tap/near/207007731" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Homebrew.20Tap.html#207007731">(Aug 15 2020 at 06:06)</a>:</h4>
<p>(even if we don't replace with <code>elan</code>, getting rid of them would be a step forward)</p>



<a name="207008446"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Homebrew%20Tap/near/207008446" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Chris Wong <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Homebrew.20Tap.html#207008446">(Aug 15 2020 at 06:35)</a>:</h4>
<p>Lean doesn't seem to be in the Ubuntu repository, so we should be okay in that respect?<br>
<a href="https://packages.ubuntu.com/search?keywords=lean&amp;searchon=names&amp;suite=eoan&amp;section=all">https://packages.ubuntu.com/search?keywords=lean&amp;searchon=names&amp;suite=eoan&amp;section=all</a></p>



<a name="207008449"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Homebrew%20Tap/near/207008449" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Chris Wong <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Homebrew.20Tap.html#207008449">(Aug 15 2020 at 06:35)</a>:</h4>
<p>There was a PPA but it's gone now<br>
<a href="https://github.com/leanprover/ppa-updater">https://github.com/leanprover/ppa-updater</a></p>



<a name="207008495"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Homebrew%20Tap/near/207008495" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Chris Wong <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Homebrew.20Tap.html#207008495">(Aug 15 2020 at 06:37)</a>:</h4>
<p>And the homebrew one is using the community version (3.18)<br>
<a href="https://github.com/Homebrew/homebrew-core/blob/master/Formula/lean.rb">https://github.com/Homebrew/homebrew-core/blob/master/Formula/lean.rb</a></p>



<a name="207008682"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Homebrew%20Tap/near/207008682" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Homebrew.20Tap.html#207008682">(Aug 15 2020 at 06:44)</a>:</h4>
<p>I would say that the homebrew one is not ideal. We'd like people to have <code>elan</code> manage their <code>lean</code> installation, providing whatever a  <code>leanpkg.toml</code>asks for.</p>



<a name="207730499"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Homebrew%20Tap/near/207730499" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Julian Berman <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Homebrew.20Tap.html#207730499">(Aug 22 2020 at 16:09)</a>:</h4>
<p>Probably should have came back to check on this thread for activity before putting the comment I just put on that ticket (which maybe I'll go delete), but yeah if it at all counts (which legitimately it shouldn't count for much given how new I am), I'd way rather <em>not</em> use elan for that personally, which is why I initially asked the question here.</p>



<a name="207730598"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Homebrew%20Tap/near/207730598" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Bryan Gin-ge Chen <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Homebrew.20Tap.html#207730598">(Aug 22 2020 at 16:10)</a>:</h4>
<p>Out of curiosity, why do you prefer not to use elan?</p>



<a name="207730611"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Homebrew%20Tap/near/207730611" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Julian Berman <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Homebrew.20Tap.html#207730611">(Aug 22 2020 at 16:10)</a>:</h4>
<p>(And again ignore me if need be :D) -- but in general I want my OS's package manager installing things, including compilers, and then use the language's package manager for installing language packages but not making arbitrary modifications to the system (this is what I do for Python, ruby, clojure, etc.)</p>



<a name="207730630"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Homebrew%20Tap/near/207730630" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Homebrew.20Tap.html#207730630">(Aug 22 2020 at 16:11)</a>:</h4>
<p>elan installs stuff to <code>~/.elan</code></p>



<a name="207730721"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Homebrew%20Tap/near/207730721" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Julian Berman <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Homebrew.20Tap.html#207730721">(Aug 22 2020 at 16:13)</a>:</h4>
<p>OK cool! That's good to know -- (two other reasons as well then just to fully list them out)</p>



<a name="207730724"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Homebrew%20Tap/near/207730724" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Julian Berman <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Homebrew.20Tap.html#207730724">(Aug 22 2020 at 16:13)</a>:</h4>
<p>One is quite petty but I didn't want to carefully read <a href="http://elan-init.sh">elan-init.sh</a> to see what it was doing</p>



<a name="207730769"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Homebrew%20Tap/near/207730769" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Julian Berman <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Homebrew.20Tap.html#207730769">(Aug 22 2020 at 16:14)</a>:</h4>
<p>If there was just a self-contained pre-built thing (as e.g. proposed on that ticket -- if elan was bottled as part of Homebrew) that'd make that go away</p>



<a name="207730783"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Homebrew%20Tap/near/207730783" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Homebrew.20Tap.html#207730783">(Aug 22 2020 at 16:15)</a>:</h4>
<p>What ticket are you talking about?</p>



<a name="207730786"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Homebrew%20Tap/near/207730786" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Julian Berman <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Homebrew.20Tap.html#207730786">(Aug 22 2020 at 16:15)</a>:</h4>
<p>And the second one (also would be solved by having elan in homebrew) is that I manage all my OS packages via a Brewfile (so when I get a new machine, running <code>brew bundle install</code>) sets up a full development environment with all the packages I want</p>



<a name="207730798"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Homebrew%20Tap/near/207730798" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Julian Berman <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Homebrew.20Tap.html#207730798">(Aug 22 2020 at 16:15)</a>:</h4>
<p>Uh sorry, it's not actually linked above, my mistake. It's...</p>



<a name="207730842"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Homebrew%20Tap/near/207730842" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Julian Berman <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Homebrew.20Tap.html#207730842">(Aug 22 2020 at 16:16)</a>:</h4>
<p><a href="https://github.com/Homebrew/homebrew-core/pull/59612">https://github.com/Homebrew/homebrew-core/pull/59612</a></p>



<a name="207731050"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Homebrew%20Tap/near/207731050" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Homebrew.20Tap.html#207731050">(Aug 22 2020 at 16:20)</a>:</h4>
<p>I'm not really familiar with the Mac OS software ecosystem, but packaging elan (and not lean) in brew makes sense to me.</p>



<a name="207731135"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Homebrew%20Tap/near/207731135" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Homebrew.20Tap.html#207731135">(Aug 22 2020 at 16:22)</a>:</h4>
<p>And then he will complain he doesn't want to use <code>pip</code> (or any variation on <code>pip</code>)...</p>



<a name="207731171"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Homebrew%20Tap/near/207731171" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Julian Berman <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Homebrew.20Tap.html#207731171">(Aug 22 2020 at 16:22)</a>:</h4>
<p>Hopefully none of the above is complaining!</p>



<a name="207731195"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Homebrew%20Tap/near/207731195" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Julian Berman <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Homebrew.20Tap.html#207731195">(Aug 22 2020 at 16:23)</a>:</h4>
<p>But as I say I'm quite fine with having a package manager manage packages for the language (I'm a python developer, so I'm quite OK with pip, and I <em>don't</em> want homebrew managing python packages)</p>



<a name="207731249"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Homebrew%20Tap/near/207731249" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Julian Berman <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Homebrew.20Tap.html#207731249">(Aug 22 2020 at 16:24)</a>:</h4>
<p>I just don't want things modifying PATH in the background, or asking to run arbitrary shell code in a shell rc (I don't know if elan does the latter? Seemed like it might, e.g. pyenv and rbenv do)</p>



<a name="207731298"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Homebrew%20Tap/near/207731298" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Homebrew.20Tap.html#207731298">(Aug 22 2020 at 16:25)</a>:</h4>
<p>In any case, you simply have to use elan to keep up with mathlib, or else take everything into your own hands. Otherwise, you'll be stuck after a week or two.</p>



<a name="207731396"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Homebrew%20Tap/near/207731396" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Homebrew.20Tap.html#207731396">(Aug 22 2020 at 16:27)</a>:</h4>
<p>Julian, I hope you don't find this unwelcoming. People tried hard to find something easy to install which is able to keep up with the crazy pace and full backward incompatibility. But we do have some docs for people who want to understand how things fit together and bundle it their way: <a href="https://leanprover-community.github.io/toolchain.html">https://leanprover-community.github.io/toolchain.html</a></p>



<a name="207731476"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Homebrew%20Tap/near/207731476" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Homebrew.20Tap.html#207731476">(Aug 22 2020 at 16:29)</a>:</h4>
<p>This is the best we can currently do to accommodate as many habits as we can (for instance your desire to use brew for Lean but not for python is a rather uncommon combination, I don't think we ever met it before).</p>



<a name="207731479"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Homebrew%20Tap/near/207731479" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Julian Berman <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Homebrew.20Tap.html#207731479">(Aug 22 2020 at 16:29)</a>:</h4>
<p>I don't find it unwelcoming at all :) -- I know I'm in that bucket (of "rolled my own". And I've read that page). I would have kept quiet too :), I just mentioned it since I saw someone else was the same kind of crazy obviously (given someone else other than me submitted that PR)</p>



<a name="207731493"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Homebrew%20Tap/near/207731493" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Julian Berman <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Homebrew.20Tap.html#207731493">(Aug 22 2020 at 16:29)</a>:</h4>
<p>I do the same for Python as what I'm talking about</p>



<a name="207731496"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Homebrew%20Tap/near/207731496" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Julian Berman <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Homebrew.20Tap.html#207731496">(Aug 22 2020 at 16:29)</a>:</h4>
<p>Homebrew installs Python, from that point forward I use Python's package manager</p>



<a name="207731547"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Homebrew%20Tap/near/207731547" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Homebrew.20Tap.html#207731547">(Aug 22 2020 at 16:30)</a>:</h4>
<p>Python generally doesn't release new versions of <code>python</code> with breaking changes every 1-2 weeks, though.</p>



<a name="207731560"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Homebrew%20Tap/near/207731560" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Julian Berman <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Homebrew.20Tap.html#207731560">(Aug 22 2020 at 16:30)</a>:</h4>
<p>Yeah, fair.</p>



<a name="207731732"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Homebrew%20Tap/near/207731732" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Simon Hudon <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Homebrew.20Tap.html#207731732">(Aug 22 2020 at 16:34)</a>:</h4>
<p>I wonder if we should package <code>elan</code> on <code>brew</code>, <code>apt-get</code>, <code>chocolate</code>, what have you, and name it <code>lean</code>. It's really the standard and strongly encouraged way of using Lean</p>



<a name="207731851"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Homebrew%20Tap/near/207731851" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Julian Berman <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Homebrew.20Tap.html#207731851">(Aug 22 2020 at 16:37)</a>:</h4>
<p>(/me -&gt; back to actually trying to learn lean instead of cause trouble. Hopefully again none of the above is complaining, and I'm happy to come back with egg on my face if/when my setup gets me stuck.)</p>



<a name="207731869"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Homebrew%20Tap/near/207731869" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Homebrew.20Tap.html#207731869">(Aug 22 2020 at 16:37)</a>:</h4>
<p>Don't worry and have fun!</p>



<a name="207744336"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Homebrew%20Tap/near/207744336" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Homebrew.20Tap.html#207744336">(Aug 22 2020 at 22:16)</a>:</h4>
<p><span class="user-mention silent" data-user-id="110026">Simon Hudon</span> <a href="#narrow/stream/113488-general/topic/Homebrew.20Tap/near/207731732">said</a>:</p>
<blockquote>
<p>I wonder if we should package <code>elan</code> on <code>brew</code>, <code>apt-get</code>, <code>chocolate</code>, what have you, and name it <code>lean</code>. It's really the standard and strongly encouraged way of using Lean</p>
</blockquote>
<p>This sounds ideal.</p>



<a name="209067456"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Homebrew%20Tap/near/209067456" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Rob Lewis <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Homebrew.20Tap.html#209067456">(Sep 04 2020 at 08:30)</a>:</h4>
<p>For homebrew, is there more to this than editing <a href="https://github.com/Homebrew/homebrew-core/blob/master/Formula/lean.rb#L27">https://github.com/Homebrew/homebrew-core/blob/master/Formula/lean.rb#L27</a> to stick in the elan install script?</p>



<a name="209068176"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Homebrew%20Tap/near/209068176" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Sebastian Ullrich <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Homebrew.20Tap.html#209068176">(Sep 04 2020 at 08:39)</a>:</h4>
<p>I'm not sure I'm happy with packaging elan under the name <code>lean</code>. It would be very confusing if updating a package named <code>lean</code> did not, you know, update Lean. As long as "Lean" is mentioned in the package description, and there is no other "lean" package, should that not be sufficient?</p>



<a name="209068599"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Homebrew%20Tap/near/209068599" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Rob Lewis <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Homebrew.20Tap.html#209068599">(Sep 04 2020 at 08:44)</a>:</h4>
<p>I'm not sure I follow -- are you proposing to delete the <code>lean</code> package I linked and add an <code>elan</code> package that mentions "Lean" in the description? That seems fine too. Anything that avoids people installing a fixed version of Lean is good.</p>



<a name="209068787"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Homebrew%20Tap/near/209068787" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Rob Lewis <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Homebrew.20Tap.html#209068787">(Sep 04 2020 at 08:46)</a>:</h4>
<p>As long as that current package exists, people will type <code>brew install lean</code> or whatever without reading anything and get confused.</p>



<a name="209068972"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Homebrew%20Tap/near/209068972" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Sebastian Ullrich <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Homebrew.20Tap.html#209068972">(Sep 04 2020 at 08:48)</a>:</h4>
<p>Yes, I would prefer that</p>



<a name="209073189"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Homebrew%20Tap/near/209073189" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Alex Peattie <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Homebrew.20Tap.html#209073189">(Sep 04 2020 at 09:39)</a>:</h4>
<p>I wonder if instead of immediately deleting the <code>lean</code> package whether it would be worth deprecating it with a message pointing people to run <code>brew install elan</code> instead. (Here's an example of a deprecated formula: <a href="https://github.com/Homebrew/homebrew-core/blob/master/Formula/acmetool.rb">https://github.com/Homebrew/homebrew-core/blob/master/Formula/acmetool.rb</a>)</p>



<a name="209087849"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Homebrew%20Tap/near/209087849" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Julian Berman <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Homebrew.20Tap.html#209087849">(Sep 04 2020 at 12:32)</a>:</h4>
<p><span class="user-mention silent" data-user-id="248283">Alex Peattie</span> <a href="#narrow/stream/113488-general/topic/Homebrew.20Tap/near/209073189">said</a>:</p>
<blockquote>
<p>I wonder if instead of immediately deleting the <code>lean</code> package whether it would be worth deprecating it with a message pointing people to run <code>brew install elan</code> instead. (Here's an example of a deprecated formula: <a href="https://github.com/Homebrew/homebrew-core/blob/master/Formula/acmetool.rb">https://github.com/Homebrew/homebrew-core/blob/master/Formula/acmetool.rb</a>)</p>
</blockquote>
<p>if it helps, according to <code>brew analytics</code>, the lean package has...:</p>
<div class="codehilite"><pre><span></span><code><span class="bp">==&gt;</span> <span class="n">Analytics</span>
<span class="n">install</span><span class="o">:</span> <span class="mi">101</span> <span class="o">(</span><span class="mi">30</span> <span class="n">days</span><span class="o">),</span> <span class="mi">132</span> <span class="o">(</span><span class="mi">90</span> <span class="n">days</span><span class="o">),</span> <span class="mi">418</span> <span class="o">(</span><span class="mi">365</span> <span class="n">days</span><span class="o">)</span>
<span class="n">install</span><span class="bp">-</span><span class="n">on</span><span class="bp">-</span><span class="n">request</span><span class="o">:</span> <span class="mi">100</span> <span class="o">(</span><span class="mi">30</span> <span class="n">days</span><span class="o">),</span> <span class="mi">131</span> <span class="o">(</span><span class="mi">90</span> <span class="n">days</span><span class="o">),</span> <span class="mi">416</span> <span class="o">(</span><span class="mi">365</span> <span class="n">days</span><span class="o">)</span>
<span class="n">build</span><span class="bp">-</span><span class="n">error</span><span class="o">:</span> <span class="mi">0</span> <span class="o">(</span><span class="mi">30</span> <span class="n">days</span><span class="o">)</span>
</code></pre></div>



<a name="209088254"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Homebrew%20Tap/near/209088254" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Julian Berman <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Homebrew.20Tap.html#209088254">(Sep 04 2020 at 12:37)</a>:</h4>
<p>(Or alternatively again as a random nobody, I personally wouldn't mind no deprecation and just switching over. Homebrew is generally pretty terrible about backwards compatibility, so as a user I'm used to cursing at it for breaking something.)</p>



<a name="209166170"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Homebrew%20Tap/near/209166170" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Homebrew.20Tap.html#209166170">(Sep 05 2020 at 07:30)</a>:</h4>
<p><span class="user-mention silent" data-user-id="110024">Sebastian Ullrich</span> <a href="#narrow/stream/113488-general/topic/Homebrew.20Tap/near/209068176">said</a>:</p>
<blockquote>
<p>I'm not sure I'm happy with packaging elan under the name <code>lean</code>. It would be very confusing if updating a package named <code>lean</code> did not, you know, update Lean. As long as "Lean" is mentioned in the package description, and there is no other "lean" package, should that not be sufficient?</p>
</blockquote>
<p>The problem is that currently <code>brew install lean</code> gives you something useless, that doesn't work with modern mathlib, because it installs some fixed version of Lean which is inevitably outdated.</p>



<a name="209166177"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Homebrew%20Tap/near/209166177" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Homebrew.20Tap.html#209166177">(Sep 05 2020 at 07:30)</a>:</h4>
<p>If we made the "tap" for <code>lean</code> actually install <code>elan</code>, couldn't we arrange so that that actually updated lean (but via elan)?</p>



<a name="209168007"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Homebrew%20Tap/near/209168007" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Homebrew.20Tap.html#209168007">(Sep 05 2020 at 08:32)</a>:</h4>
<p><span class="user-mention" data-user-id="110024">@Sebastian Ullrich</span> is it easy for elan to be installed globally (in something like <code>/usr/bin</code>) and still do its magic inside each <code>$HOME/.lean</code>?</p>



<a name="209168011"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Homebrew%20Tap/near/209168011" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Homebrew.20Tap.html#209168011">(Sep 05 2020 at 08:32)</a>:</h4>
<p>And also, will <code>elan</code> be automatically able to handle Lean4 when the time will come?</p>



<a name="209168012"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Homebrew%20Tap/near/209168012" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Sebastian Ullrich <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Homebrew.20Tap.html#209168012">(Sep 05 2020 at 08:32)</a>:</h4>
<p>Yes, that should just work</p>



<a name="209168021"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Homebrew%20Tap/near/209168021" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Sebastian Ullrich <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Homebrew.20Tap.html#209168021">(Sep 05 2020 at 08:33)</a>:</h4>
<p>We're using <code>elan</code> for Lean 4 development right now</p>



<a name="209168026"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Homebrew%20Tap/near/209168026" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Homebrew.20Tap.html#209168026">(Sep 05 2020 at 08:33)</a>:</h4>
<p>Great, thanks!</p>



<a name="209168070"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Homebrew%20Tap/near/209168070" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Homebrew.20Tap.html#209168070">(Sep 05 2020 at 08:34)</a>:</h4>
<p>Is there an easy thing to type to e.g switch mathlib to lean 4 using elan?</p>



<a name="209168075"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Homebrew%20Tap/near/209168075" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Homebrew.20Tap.html#209168075">(Sep 05 2020 at 08:35)</a>:</h4>
<p>Yes, good old <code>elan --magic-port</code></p>



<a name="209168083"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Homebrew%20Tap/near/209168083" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Homebrew.20Tap.html#209168083">(Sep 05 2020 at 08:35)</a>:</h4>
<p>And mathlib is ported to Lean4!</p>



<a name="209168125"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Homebrew%20Tap/near/209168125" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Homebrew.20Tap.html#209168125">(Sep 05 2020 at 08:36)</a>:</h4>
<p>I mean is the install procedure more complicated than just changing the version number in mathlib</p>



<a name="209168133"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Homebrew%20Tap/near/209168133" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Homebrew.20Tap.html#209168133">(Sep 05 2020 at 08:36)</a>:</h4>
<p>obviously it won't work but I guess this would be step 0.0.1</p>



<a name="209168150"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Homebrew%20Tap/near/209168150" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Sebastian Ullrich <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Homebrew.20Tap.html#209168150">(Sep 05 2020 at 08:37)</a>:</h4>
<p>There is no GitHub release for elan to find automatically yet. We use local <code>elan toolchain link</code>s.</p>



<a name="209168272"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Homebrew%20Tap/near/209168272" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Homebrew.20Tap.html#209168272">(Sep 05 2020 at 08:40)</a>:</h4>
<p>Do you know why rust doesn't use, say <code>apt</code> or <code>brew</code> to install <code>rustup</code> globally and then let it do its magic in user space?</p>



<a name="209168406"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Homebrew%20Tap/near/209168406" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Ruben Van de Velde <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Homebrew.20Tap.html#209168406">(Sep 05 2020 at 08:44)</a>:</h4>
<p>My suspicion is "packagers don't like that approach"</p>



<a name="209168418"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Homebrew%20Tap/near/209168418" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Sebastian Ullrich <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Homebrew.20Tap.html#209168418">(Sep 05 2020 at 08:45)</a>:</h4>
<p>There is some discussion in <a href="https://github.com/rust-lang/rustup/issues/800">https://github.com/rust-lang/rustup/issues/800</a>. Looks more like "nobody volunteered to do it".</p>



<a name="209168671"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Homebrew%20Tap/near/209168671" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Homebrew.20Tap.html#209168671">(Sep 05 2020 at 08:52)</a>:</h4>
<p>Indeed.</p>



<a name="209168737"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Homebrew%20Tap/near/209168737" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Homebrew.20Tap.html#209168737">(Sep 05 2020 at 08:54)</a>:</h4>
<p>Are there build instructions for elan somewhere?</p>



<a name="209169487"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Homebrew%20Tap/near/209169487" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Sebastian Ullrich <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Homebrew.20Tap.html#209169487">(Sep 05 2020 at 09:18)</a>:</h4>
<p>I'm pretty sure it's just <code>cargo build --release</code>, same as for any other Rust project</p>



<a name="209170492"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Homebrew%20Tap/near/209170492" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Gabriel Ebner <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Homebrew.20Tap.html#209170492">(Sep 05 2020 at 09:46)</a>:</h4>
<p><span class="user-mention silent" data-user-id="110031">Patrick Massot</span> <a href="#narrow/stream/113488-general/topic/Homebrew.20Tap/near/209168272">said</a>:</p>
<blockquote>
<p>Do you know why rust doesn't use, say <code>apt</code> or <code>brew</code> to install <code>rustup</code> globally and then let it do its magic in user space?</p>
</blockquote>
<p>NixOS has both <code>rustup</code> and <code>elan</code> packages.  ArchLinux has a <code>rustup</code> package.</p>



<a name="209179446"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Homebrew%20Tap/near/209179446" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Homebrew.20Tap.html#209179446">(Sep 05 2020 at 14:02)</a>:</h4>
<p>In arch, at least, if I recall correctly, there is a <code>rustc</code> in <code>/usr/bin</code> which is symlinked to <code>rustup</code> in the same directory, which then figures everything out when you call rust.</p>



<a name="209183460"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Homebrew%20Tap/near/209183460" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Sebastian Ullrich <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Homebrew.20Tap.html#209183460">(Sep 05 2020 at 15:36)</a>:</h4>
<p>Yes, this is how <code>rustup</code> (and thus <code>elan</code>) works in general</p>



<a name="209189728"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Homebrew%20Tap/near/209189728" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Alex Peattie <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Homebrew.20Tap.html#209189728">(Sep 05 2020 at 18:23)</a>:</h4>
<p>It looks like <code>rustup</code> is installable via Homebrew: <a href="https://github.com/Homebrew/homebrew-core/blob/master/Formula/rustup-init.rb">https://github.com/Homebrew/homebrew-core/blob/master/Formula/rustup-init.rb</a></p>
<p>I guess this could be lightly modified to make it work for <code>elan</code> <span aria-label="thinking" class="emoji emoji-1f914" role="img" title="thinking">:thinking:</span> ?</p>
<p>Edit: Ah I see that it actually "installs" <code>rustup-init</code>, then the user has to run <code>rustup-init</code> to actually install <code>rustup</code>. So installing <code>elan</code> via Homebrew with this approach would mean doing:</p>
<div class="codehilite"><pre><span></span><code>brew install elan
elan-init
</code></pre></div>



<a name="209191165"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Homebrew%20Tap/near/209191165" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Gabriel Ebner <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Homebrew.20Tap.html#209191165">(Sep 05 2020 at 19:02)</a>:</h4>
<p>Wow, this is badly packaged.  Both the arch and nixos packages work out of the box.  You just have to create the right symlinks at installation time: <a href="https://github.com/NixOS/nixpkgs/blob/ade0eba99ddb4f559ce3daea2d073c92eeada5eb/pkgs/applications/science/logic/elan/default.nix#L23-L35">https://github.com/NixOS/nixpkgs/blob/ade0eba99ddb4f559ce3daea2d073c92eeada5eb/pkgs/applications/science/logic/elan/default.nix#L23-L35</a></p>



<a name="209214081"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Homebrew%20Tap/near/209214081" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Alex Peattie <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Homebrew.20Tap.html#209214081">(Sep 06 2020 at 07:42)</a>:</h4>
<p>It looks like there was a proposed formula which would "just work": <a href="https://github.com/Homebrew/homebrew-core/pull/9617">homebrew#9617</a></p>
<p>But it was rejected for various reasons discussed in the PR: for example, because it writes things to <code>~./rustup</code> rather than the Homebrew directory... So it was replaced with <a href="https://github.com/Homebrew/homebrew-core/pull/14236">homebrew#14236</a> instead.</p>
<p>I actually think it might not be worth the effort to get <code>elan</code> and <code>lean</code> playing nice in the Homebrew ecosystem, since they have much <a href="https://docs.brew.sh/Acceptable-Formulae">stricter rules</a> than other package managers. I think it might be better to either:</p>
<ul>
<li>Delete <code>lean</code> from Homebrew completely, have people follow the official install procedure instead</li>
<li>Keep the lean formula as is, implement something like <a href="https://github.com/marketplace/actions/homebrew-bump-formula">homebrew-bump-formula</a> to keep it always up-to-date with the latest lean (happy to help with the latter if people want to go that direction <span aria-label="smile" class="emoji emoji-1f642" role="img" title="smile">:smile:</span> )</li>
</ul>



<a name="209215377"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Homebrew%20Tap/near/209215377" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Sebastian Ullrich <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Homebrew.20Tap.html#209215377">(Sep 06 2020 at 08:27)</a>:</h4>
<p><span class="user-mention silent" data-user-id="248283">Alex Peattie</span> <a href="#narrow/stream/113488-general/topic/Homebrew.20Tap/near/209214081">said</a>:</p>
<blockquote>
<p>But it was rejected for various reasons discussed in the PR: for example, because it writes things to <code>~./rustup</code> rather than the Homebrew directory...</p>
</blockquote>
<p>I'm not sure how you came to that conclusion, the last statement seems to say the opposite:</p>
<blockquote>
<p>Ok so my position is if we can install this from source, from a stable URL, without it installing to paths that will conflict with Homebrew (i.e. not to /usr/local/bin but instead /usr/local/var or ~/.rustup) and without it having any sort of self-update features possible at runtime: I'd be fine with accepting it as then it will feel similar to rbenv and friends. It looks like to do that it should only install a single binary (rustup) and any completions/manpages but not things like rustc so it doesn't conflict.</p>
</blockquote>
<p>Everything but the conflicts is already true for <code>elan</code>; and that part would be automatically resolved as well if we want to remove the conflicting <code>lean</code> package anyway.</p>



<a name="209215532"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Homebrew%20Tap/near/209215532" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Sebastian Ullrich <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Homebrew.20Tap.html#209215532">(Sep 06 2020 at 08:33)</a>:</h4>
<p>But all of this only makes sense if <code>leanproject</code> is packaged (with a dependency on <code>elan</code>) at the same time, doesn't it? Having just one of the tools packaged is worse than having none of them.</p>



<a name="209216426"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Homebrew%20Tap/near/209216426" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Alex Peattie <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Homebrew.20Tap.html#209216426">(Sep 06 2020 at 09:01)</a>:</h4>
<p><span class="user-mention silent" data-user-id="110024">Sebastian Ullrich</span> <a href="#narrow/stream/113488-general/topic/Homebrew.20Tap/near/209215377">said</a>:</p>
<blockquote>
<p><span class="user-mention silent" data-user-id="248283">Alex Peattie</span> <a href="#narrow/stream/113488-general/topic/Homebrew.20Tap/near/209214081">said</a>:</p>
<blockquote>
<p>But it was rejected for various reasons discussed in the PR: for example, because it writes things to <code>~./rustup</code> rather than the Homebrew directory...</p>
</blockquote>
<p>I'm not sure how you came to that conclusion, the last statement seems to say the opposite</p>
</blockquote>
<p>Mm yes I should have been clearer, I think my understanding is that generally most tools (good Homebrew citizens) should stick to only writing to the <code>/usr/local</code> directory:</p>
<blockquote>
<p>I'm disappointed by that, actually. Those caveats were useful if you installed (e.g.) rbenv from Homebrew expecting it to behave like a good Homebrew citizen and store its data in /usr/local. Automatically changing the default behavior of those tools could be problematic (backwards compatibility, expectations of users not familiar with Homebrew), and those caveats communicated not only that the tools were ill-behaved citizens, but how I could coerce them to behave properly.</p>
</blockquote>
<p>But for some tools, like <code>rbenv</code>, <code>rustup</code> etc. they make special exceptions because they install additional binaries that  could conflict with other binaries installed by Homebrew.</p>



<a name="209216600"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Homebrew%20Tap/near/209216600" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Alex Peattie <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Homebrew.20Tap.html#209216600">(Sep 06 2020 at 09:06)</a>:</h4>
<p>I'm not an expert though on Homebrew at all! I was just trying to understand why <code>rustup</code> is packaged on Homebrew the way it is, and not in an "it just works" way</p>



<a name="209222557"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Homebrew%20Tap/near/209222557" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Rob Lewis <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Homebrew.20Tap.html#209222557">(Sep 06 2020 at 12:06)</a>:</h4>
<p><span class="user-mention silent" data-user-id="110024">Sebastian Ullrich</span> <a href="#narrow/stream/113488-general/topic/Homebrew.20Tap/near/209215532">said</a>:</p>
<blockquote>
<p>But all of this only makes sense if <code>leanproject</code> is packaged (with a dependency on <code>elan</code>) at the same time, doesn't it? Having just one of the tools packaged is worse than having none of them.</p>
</blockquote>
<p>I think the current setup (homebrew packages one fixed version of Lean) is worse than just packaging elan, which is worse than packaging elan and leanproject. I just want to avoid the stream of people who blindly grab Lean from homebrew without reading anything, get something incompatible with the recommended workflow, and come here complaining that things don't work. At least bare elan is compatible.</p>



<a name="209222655"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Homebrew%20Tap/near/209222655" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Rob Lewis <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Homebrew.20Tap.html#209222655">(Sep 06 2020 at 12:09)</a>:</h4>
<p>I haven't used a mac in ages and know nothing about homebrew. If there's a reasonable way to package any part of the Lean ecosystem that doesn't conflict with installing the rest, then great. If not, then too bad. Either way the current package should probably be deleted.</p>



<a name="209226193"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Homebrew%20Tap/near/209226193" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Sebastian Ullrich <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Homebrew.20Tap.html#209226193">(Sep 06 2020 at 13:47)</a>:</h4>
<p>I agree, the <code>lean</code> package should be deleted in either case. Which might be hard to convince the Homebrew people of without providing an <code>elan</code> package as an alternative.</p>



<a name="209460429"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Homebrew%20Tap/near/209460429" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Alexandre Rademaker <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Homebrew.20Tap.html#209460429">(Sep 09 2020 at 00:32)</a>:</h4>
<p>Yes. Please one vote to have elan as a package in Homebrew before remove the Lean package</p>



<a name="209462151"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Homebrew%20Tap/near/209462151" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Alexandre Rademaker <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Homebrew.20Tap.html#209462151">(Sep 09 2020 at 01:02)</a>:</h4>
<p>I have been using the Lean installed with Homebrew, mainly because I am very uncomfortable with the scripts from <a href="https://leanprover-community.github.io/install/macos.html">https://leanprover-community.github.io/install/macos.html</a></p>
<p>As far as I understood, the <a href="https://raw.githubusercontent.com/leanprover-community/mathlib-tools/master/scripts/install_macos.sh">https://raw.githubusercontent.com/leanprover-community/mathlib-tools/master/scripts/install_macos.sh</a> will try to modify the  .profile and .bash_profile files, but MacOs recently moved from bash to zsh (see <a href="https://support.apple.com/en-us/HT208050">https://support.apple.com/en-us/HT208050</a>), and I am already using zsh. I had a hard time fixing all issues once I adopted zsh, and I am afraid to break things.</p>
<p>Then we have this script calling another script, the <a href="https://raw.githubusercontent.com/Kha/elan/master/elan-init.sh">https://raw.githubusercontent.com/Kha/elan/master/elan-init.sh</a>. This second script is a little obscure. In the beginning, it says that it will just detect the OS, download and execute the installer. But I know nothing about what the installer will do. I know that it is a fork of rustup, but I never used rust.  </p>
<p>Surely I understand that all of these points are my problems and I am very grateful for all that this community is doing!</p>



<a name="209470770"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Homebrew%20Tap/near/209470770" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Homebrew.20Tap.html#209470770">(Sep 09 2020 at 04:23)</a>:</h4>
<p><span class="user-mention" data-user-id="121542">@Alexandre Rademaker</span> How does packaging <code>elan</code> in Homebrew change any of these considerations? It doesn't become magically more secure by doing that, right?</p>



<a name="209503226"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Homebrew%20Tap/near/209503226" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Alexandre Rademaker <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Homebrew.20Tap.html#209503226">(Sep 09 2020 at 12:22)</a>:</h4>
<p>Good question and thank you for asking. I was thinking about it. Homebrew makes very clear right from his homepage that </p>
<blockquote>
<p>Homebrew won’t install files outside its prefix and you can place a Homebrew installation wherever you like.</p>
</blockquote>
<p>Packages are installed from formulas. I am not a ruby programmer but the DSL is clean to read and we can make a good sense of what will be done. </p>
<p>Packages have dependencies and it means I will not have unnecessary  duplications of softwares in my system (ideally).</p>



<a name="209503979"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Homebrew%20Tap/near/209503979" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Homebrew.20Tap.html#209503979">(Sep 09 2020 at 12:31)</a>:</h4>
<p>Ok, that makes sense</p>



{% endraw %}

<hr><p>Last updated: Oct 06 2020 at 10:10 UTC</p>